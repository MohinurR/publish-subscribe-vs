# Publish-Subscribe
На сервер подключаются клиенты и время от времени отправляют следующие команды:

* `"subscribe <position> <items, …>"` – клиент хочет получить от иных клиентов, находясь в такой позиции (точка в n-мерном пространстве) следующие ресурсы, в ответ он ждёт адрес иного клиента, который может предоставить такой набор ресурсов, если ресурсы были предоставлены – объявление стирается.

* `"publish <address> <position> <items, …>"` – клиент хочет предоставить ресурсы иным клиентам, если ресурсы были предоставлены – объявление стирается.

Ответы на команды клиентов **"!ok"** или **"!error <string>"**. Ресурсы – это булев массив длины не более **nitems** и его значение >= 1. В течении числа секунд = расстоянию между позициями клиентов, выбранные клиенты получают одновременно ответ "!ready" и связанный канал на пересылку сообщений друг-другу, при разрыве успевшие отослаться байты доотсылаются, и клиенты оповещаются **"!stop"** о конце соединения. Сервер ведёт учёт длительностей всех каналов и заинтересован в минимизации этих длительностей
В случае ошибки в ответ пользователю отсылается конкретная ошибка с описанием.

Running: Запуск `./pubsrv`

Argument		           | Description
---------------------- | ----------------------
**-d --dir=<path>**    | путь до папки сервера, где сохранять файлы
**-i --ip=<IP>**       | IP адрес, на котором работает listener сервер
**-p --port=<uint>**   | порт, на котором работает listener сервера
**-t --dims=<uint>**   | размерность пространства позиции
**-n --nitems=<uint>** | максимальное количество элементов для сопоставления ресурсов
**-w --workers=<uint>**| число потоков/процессов (одновременных сессий пользователей)
**-v --verbose**	     | печатать в stdout подробно производимые операции сервером (без этого флага печатать только ошибки)
**-h --help**:	       | распечатать в консоль аргументы, как использовать программу


# Installation

* Install [boost library](https://sourceforge.net/projects/boost/files/boost-binaries/1.75.0/boost_1_75_0-msvc-14.2-32.exe/download) for visual studio 2019
* Add Include Path to Visual Studio - `<boost installation path>`
* Add Library Path to Visual Studio - `<boost installation path>/lib32-msvc-14.2`
* Compile in x86 Debug/Release mode